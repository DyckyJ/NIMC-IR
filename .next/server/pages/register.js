"use strict";(()=>{var e={};e.id=787,e.ids=[220,787],e.modules={361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},441:(e,t,r)=>{r.r(t),r.d(t,{config:()=>S,default:()=>h,getServerSideProps:()=>f,getStaticPaths:()=>b,getStaticProps:()=>_,reportWebVitals:()=>x,routeModule:()=>w,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>q,unstable_getStaticParams:()=>M,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>v});var a={};r.r(a),r.d(a,{default:()=>g});var s=r(3885),i=r(237),n=r(1413),o=r(8548),l=r.n(o),u=r(9380),m=r.n(u),p=r(8732),d=r(2015),c=r(4233);function g(){let e=(0,c.useRouter)(),[t,r]=(0,d.useState)({first_name:"",last_name:"",email:"",department:"",password:""}),[a,s]=(0,d.useState)(!1),[i,n]=(0,d.useState)(""),o=e=>{r({...t,[e.target.name]:e.target.value})},l=async r=>{r.preventDefault(),s(!0),n("");let a={...t,email:t.email.trim(),first_name:t.first_name.trim(),last_name:t.last_name.trim(),department:t.department.trim()},{data:i,error:o}=await Object(function(){var e=Error("Cannot find module '@/lib/supabaseClient'");throw e.code="MODULE_NOT_FOUND",e}()).auth.signUp({email:a.email,password:t.password});if(o){n(o.message),s(!1);return}let{error:l}=await Object(function(){var e=Error("Cannot find module '@/lib/supabaseClient'");throw e.code="MODULE_NOT_FOUND",e}()).from("users").insert([{first_name:a.first_name,last_name:a.last_name,email:a.email,department:a.department,approved:!1}]);l?n(l.message):(alert("Registration complete! Await admin approval."),e.push("/login")),s(!1)};return(0,p.jsxs)("div",{style:{maxWidth:500,margin:"auto",padding:"2rem"},children:[(0,p.jsx)("h2",{children:"Register"}),(0,p.jsxs)("form",{onSubmit:l,children:[(0,p.jsx)("input",{name:"first_name",placeholder:"First Name",onChange:o,required:!0}),(0,p.jsx)("input",{name:"last_name",placeholder:"Last Name",onChange:o,required:!0}),(0,p.jsx)("input",{name:"email",type:"email",placeholder:"Email",onChange:o,required:!0}),(0,p.jsx)("input",{name:"department",placeholder:"Department",onChange:o,required:!0}),(0,p.jsx)("input",{name:"password",type:"password",placeholder:"Password (8+ characters)",minLength:8,onChange:o,required:!0}),(0,p.jsx)("button",{type:"submit",disabled:a,children:a?"Registering...":"Register"}),i&&(0,p.jsx)("p",{style:{color:"red"},children:i})]})]})}!function(){var e=Error("Cannot find module '@/lib/supabaseClient'");throw e.code="MODULE_NOT_FOUND",e}();let h=(0,n.M)(a,"default"),_=(0,n.M)(a,"getStaticProps"),b=(0,n.M)(a,"getStaticPaths"),f=(0,n.M)(a,"getServerSideProps"),S=(0,n.M)(a,"config"),x=(0,n.M)(a,"reportWebVitals"),v=(0,n.M)(a,"unstable_getStaticProps"),P=(0,n.M)(a,"unstable_getStaticPaths"),M=(0,n.M)(a,"unstable_getStaticParams"),j=(0,n.M)(a,"unstable_getServerProps"),q=(0,n.M)(a,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:i.A.PAGES,page:"/register",pathname:"/register",bundlePath:"",filename:""},components:{App:m(),Document:l()},userland:a})},2015:e=>{e.exports=require("react")},2326:e=>{e.exports=require("react-dom")},3873:e=>{e.exports=require("path")},4075:e=>{e.exports=require("zlib")},7910:e=>{e.exports=require("stream")},8732:e=>{e.exports=require("react/jsx-runtime")},9021:e=>{e.exports=require("fs")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[548,156],()=>r(441));module.exports=a})();