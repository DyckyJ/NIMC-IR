"use strict";(()=>{var e={};e.id=58,e.ids=[58,220],e.modules={361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:e=>{e.exports=require("react")},2326:e=>{e.exports=require("react-dom")},3873:e=>{e.exports=require("path")},4075:e=>{e.exports=require("zlib")},4357:(e,r,t)=>{t.r(r),t.d(r,{config:()=>P,default:()=>w,getServerSideProps:()=>v,getStaticPaths:()=>b,getStaticProps:()=>m,reportWebVitals:()=>f,routeModule:()=>O,unstable_getServerProps:()=>_,unstable_getServerSideProps:()=>C,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>x});var s={};t.r(s),t.d(s,{default:()=>g});var a=t(3885),o=t(237),n=t(1413),d=t(8548),i=t.n(d),u=t(9380),l=t.n(u),c=t(8732),p=t(2015),h=t(4233);function g(){let[e,r]=(0,p.useState)(""),[t,s]=(0,p.useState)(""),[a,o]=(0,p.useState)(""),[n,d]=(0,p.useState)(!1),[i,u]=(0,p.useState)(""),[l,g]=(0,p.useState)(""),w=(0,h.useRouter)(),m=async e=>{if(e.preventDefault(),u(""),g(""),t!==a)return void u("New password and confirm password do not match.");if(t.length<8)return void u("Password must be at least 8 characters.");d(!0);let{data:{user:r},error:s}=await Object(function(){var e=Error("Cannot find module '@/lib/supabaseClient'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getUser();if(s||!r){u("User not found."),d(!1);return}try{let{error:e}=await Object(function(){var e=Error("Cannot find module '@/lib/supabaseClient'");throw e.code="MODULE_NOT_FOUND",e}()).auth.updateUser({password:t});e?u(e.message):(await Object(function(){var e=Error("Cannot find module '@/services/brevo'");throw e.code="MODULE_NOT_FOUND",e}())({toEmail:r.email,subject:"Your Password Was Changed",htmlContent:"<p>Your password has been successfully changed.</p>",textContent:"Your password has been successfully changed."}),g("Password updated successfully."),w.push("/login"))}catch(e){console.error("Error updating password:",e),u("An unexpected error occurred while changing the password.")}d(!1)};return(0,c.jsxs)("div",{style:{maxWidth:400,margin:"auto",padding:"2rem"},children:[(0,c.jsx)("h2",{children:"Change Password"}),i&&(0,c.jsx)("p",{style:{color:"red"},children:i}),l&&(0,c.jsx)("p",{style:{color:"green"},children:l}),(0,c.jsxs)("form",{onSubmit:m,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"oldPassword",children:"Old Password"}),(0,c.jsx)("input",{id:"oldPassword",type:"password",value:e,onChange:e=>r(e.target.value),required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"newPassword",children:"New Password"}),(0,c.jsx)("input",{id:"newPassword",type:"password",value:t,onChange:e=>s(e.target.value),required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,c.jsx)("input",{id:"confirmPassword",type:"password",value:a,onChange:e=>o(e.target.value),required:!0})]}),(0,c.jsx)("button",{type:"submit",disabled:n,children:n?"Changing Password...":"Change Password"})]})]})}!function(){var e=Error("Cannot find module '@/lib/supabaseClient'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/services/brevo'");throw e.code="MODULE_NOT_FOUND",e}();let w=(0,n.M)(s,"default"),m=(0,n.M)(s,"getStaticProps"),b=(0,n.M)(s,"getStaticPaths"),v=(0,n.M)(s,"getServerSideProps"),P=(0,n.M)(s,"config"),f=(0,n.M)(s,"reportWebVitals"),x=(0,n.M)(s,"unstable_getStaticProps"),S=(0,n.M)(s,"unstable_getStaticPaths"),j=(0,n.M)(s,"unstable_getStaticParams"),_=(0,n.M)(s,"unstable_getServerProps"),C=(0,n.M)(s,"unstable_getServerSideProps"),O=new a.PagesRouteModule({definition:{kind:o.A.PAGES,page:"/change-password",pathname:"/change-password",bundlePath:"",filename:""},components:{App:l(),Document:i()},userland:s})},7910:e=>{e.exports=require("stream")},8732:e=>{e.exports=require("react/jsx-runtime")},9021:e=>{e.exports=require("fs")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[548,156],()=>t(4357));module.exports=s})();